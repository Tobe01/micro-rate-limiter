<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Rate Limiter Test</title>
  <link rel="stylesheet" href="test-limiter.css">
</head>
<body>
  <h1>Testing micro-rate-limiter</h1>
  <p>Click the button to send 15 requests to <code>http://localhost:3000</code>.</p>
  <button id="start">Start Test</button>

  <div class="results" id="results"></div>

  <script>
    document.getElementById('start').addEventListener('click', async () => {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = ''; // Clear previous results

      for (let i = 1; i <= 15; i++) {
        try {
          const res = await fetch('http://localhost:3000');
          const data = await res.json();

          const resultEl = document.createElement('div');
          resultEl.className = 'result ' + (res.status === 200 ? 'success' : 'error');
          resultEl.textContent = `${i}: Status ${res.status} â†’ ${JSON.stringify(data)}`;
          resultsDiv.appendChild(resultEl);
        } catch (err) {
          const errorEl = document.createElement('div');
          errorEl.className = 'result error';
          errorEl.textContent = `${i}: Request failed (${err.message})`;
          resultsDiv.appendChild(errorEl);
        }
      }
    });
  </script>
</body>
</html>
